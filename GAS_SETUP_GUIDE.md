# Google Apps Script メール送信設定ガイド

このガイドでは、AI経営軍師のお問い合わせフォームからメールを送信するためのGoogle Apps Script (GAS) の設定方法を説明します。

## 設定手順

### 1. Google Apps Script プロジェクトの作成

1. [Google Apps Script](https://script.google.com) にアクセス
2. Googleアカウントでログイン
3. 「新しいプロジェクト」をクリック
4. プロジェクト名を「AI経営軍師メール送信」などに変更

### 2. スクリプトのコピー

1. デフォルトの `myFunction` を削除
2. `google-apps-script.gs` の内容をすべてコピー
3. Google Apps Script エディタに貼り付け
4. 保存（Ctrl+S または Cmd+S）

### 3. メールアドレスの設定

スクリプト内の以下の部分を必要に応じて変更：
```javascript
to: 'leadfive.138@gmail.com', // 受信先メールアドレスを設定
```

### 4. ウェブアプリとしてデプロイ

1. エディタ右上の「デプロイ」ボタンをクリック
2. 「新しいデプロイ」を選択
3. 設定:
   - 種類: 「ウェブアプリ」を選択
   - 説明: 「AI経営軍師お問い合わせフォーム」
   - 実行ユーザー: 「自分」
   - アクセスできるユーザー: 「全員」
4. 「デプロイ」をクリック
5. 初回は権限の承認が必要:
   - 「アクセスを承認」をクリック
   - Googleアカウントを選択
   - 「詳細」→「安全でないページに移動」をクリック
   - 「許可」をクリック

### 5. ウェブアプリのURLをコピー

デプロイ完了後に表示される「ウェブアプリのURL」をコピー
（例: `https://script.google.com/macros/s/AKfyc.../exec`）

### 6. 環境変数の設定

プロジェクトのルートディレクトリに `.env.local` ファイルを作成（既存の場合は追記）:
```
NEXT_PUBLIC_GAS_URL=https://script.google.com/macros/s/YOUR_DEPLOYMENT_ID/exec
```

### 7. テスト

1. ブラウザでGASのURLにアクセスして動作確認
   - `{"message":"GAS Email Service is running"}` が表示されればOK

2. お問い合わせフォームから実際にテスト送信

## 注意事項

- Google Apps Scriptの無料枠では1日あたりのメール送信数に制限があります（100通/日）
- スクリプトを更新した場合は、必ず「新しいデプロイ」を作成してください
- URLは外部に公開されないよう注意してください

## トラブルシューティング

### メールが届かない場合
1. GASのエディタで「実行数」タブを確認
2. エラーログがないか確認
3. 迷惑メールフォルダを確認

### CORS エラーが発生する場合
GASは自動的にCORSヘッダーを追加するため、通常は問題ありません。
エラーが続く場合は、ブラウザのコンソールでエラー詳細を確認してください。